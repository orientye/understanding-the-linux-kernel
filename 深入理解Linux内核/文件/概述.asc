:toc:
:toclevels: 5
:hardbreaks-option:

== 概述
▪ 文件系统类型

    基于磁盘的文件系统, 例如ext4, fat
    无持久存储的文件系统, 例如proc
    网络文件系统, 例如nfs, 现在更流行的是分布式存储系统

▪ inode

    通常一个文件由目录项、inode和数据块组成：
    目录项：包括文件名和inode节点号。
    inode：又称文件索引节点，包含文件的基础信息以及数据块的指针。
    数据块：包含文件的具体内容。
    https://www.ruanyifeng.com/blog/2011/12/inode.html

▪ 万物皆文件

    字符和块设备
    套接字
    管道
    终端

▪ 文件描述符(fd)

    每个进程的文件描述符都是唯一的
    文件描述符是file_struct结构中的file(打开文件创建的对象)指针数组的索引
    file对象只有打开文件时才会创建并与文件描述符相关联void fd_install(unsigned int fd, struct file *file)
    进程间传递文件描述符除了父子进程外没有意义. 父子进程之间会将file_struct的file指针数组全部拷贝, 因此子进程才可以使用父进程fd

▪ 分层结构

    ----------------
    应用层
    ----------------
    VFS层
    ----------------
    文件系统层
    ----------------
    设备驱动层
    ----------------
    物理层
    ----------------

▪ 块设备与字符设备

    块设备: 以块或者扇区为单位，如磁盘
    字符设备: 以字符为单位, 如键盘鼠标
    https://elixir.bootlin.com/linux/latest/source/Documentation/admin-guide/devices.txt
