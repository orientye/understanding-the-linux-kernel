:toc:
:toclevels: 5
:hardbreaks-option:

== 无持久存储文件系统

=== proc
▪ /proc:  man proc
▪ https://github.com/torvalds/linux/tree/master/fs/proc

▪ 内容:
cd /proc/$pid
ll -a
cat maps/cat status/od -t a cmdline等

▪ struct proc_dir_entry
https://github.com/torvalds/linux/blob/master/fs/proc/internal.h

▪ struct proc_inode
https://github.com/torvalds/linux/blob/master/fs/proc/internal.h

▪ init
start_kernel[init/main.c]
	proc_caches_init();
    ...
	proc_root_init();

▪ 装载proc文件系统
从用户空间看, /proc的装载几乎与非虚拟文件系统是一样的。唯一的不同是通常将proc或者none关键字指定为数据源, 而不是使用设备文件。
struct file_system_type proc_fs_type 
proc_fill_super函数
struct proc_dir_entry proc_root
struct file_operations proc_root_operations
struct inode_operations proc_root_inode_operations

▪ 管理proc数据项
__proc_create
proc_root_lookup https://github.com/torvalds/linux/blob/master/fs/proc/root.c

▪ 读写
https://github.com/torvalds/linux/blob/master/fs/proc/root.c

▪ 进程相关信息
proc_pid_lookup https://github.com/torvalds/linux/blob/master/fs/proc/base.c

▪ 系统控制机制

=== libfs
https://github.com/torvalds/linux/blob/master/fs/libfs.c

=== sysfs
https://github.com/torvalds/linux/tree/master/fs/sysfs
