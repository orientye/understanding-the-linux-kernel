:toc:
:toclevels: 5
:hardbreaks-option:

== 数据结构

=== 双向链表
https://elixir.bootlin.com/linux/latest/source/include/linux/list.h

=== 哈希表
https://elixir.bootlin.com/linux/latest/source/include/linux/hashtable.h

参考: https://lwn.net/Kernel/Index/#Hash_table

=== 红黑树
https://elixir.bootlin.com/linux/latest/source/include/linux/rbtree.h
https://elixir.bootlin.com/linux/latest/source/lib/rbtree.c

参考: https://docs.kernel.org/core-api/rbtree.html

=== maple tree
v6.1引入，是一种B树，RCU safe。

- radix tree (trie)

    ▪ When compact, Radix searches are quite efficient
    ▪ When sparse, Radix searches are extremely poor

- rbtree
    
    ▪ Function pointers are not as fast as they were a few years ago
    ▪ Not cache optimized
    ▪ Not RCU safe
        difficult to handle in a lockless manner:
            the balancing operation of the rbtree affects multiple items at the same time
    ▪ API is difficult to use

[format="csv", options="header", separator=#]
|===
  #rbtree#radix tree#maple tree
RCU safe#No#Yes#Yes
range support#Yes#Limited#Non-overlapping
tree height#Tall#Short#Medium
API#Hard#Easy#Easy
node#Embedded#External#External
node size#24 bytes#576 bytes#256 bytes
|===

https://elixir.bootlin.com/linux/latest/source/include/linux/maple_tree.h

参考: https://lpc.events/event/4/contributions/553/attachments/362/594/2019_LPC_Maple_Tree.pdf
参考: https://lwn.net/Kernel/Index/#Maple_trees

=== 基数树
https://elixir.bootlin.com/linux/latest/source/include/linux/radix-tree.h
https://elixir.bootlin.com/linux/latest/source/lib/radix-tree.c

参考: https://lwn.net/Kernel/Index/#Radix_tree

=== 位图
https://elixir.bootlin.com/linux/latest/source/include/linux/bitmap.h
https://elixir.bootlin.com/linux/latest/source/lib/bitmap.c

=== kfifo
https://elixir.bootlin.com/linux/latest/source/include/linux/kfifo.h

参考: https://lwn.net/Kernel/Index/#kfifo

=== xarray
https://elixir.bootlin.com/linux/latest/source/include/linux/xarray.h
https://elixir.bootlin.com/linux/latest/source/lib/xarray.c

参考: https://docs.kernel.org/core-api/xarray.html
参考: https://lwn.net/Kernel/Index/#XArray

=== circ_buf
https://elixir.bootlin.com/linux/latest/source/include/linux/circ_buf.h

参考: https://docs.kernel.org/core-api/circular-buffers.html
参考: https://lwn.net/Kernel/Index/#Circular_buffers