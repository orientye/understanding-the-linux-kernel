:toc:
:toclevels: 5
:hardbreaks-option:

== 数据结构

=== mem_map page数组
struct page *mem_map;
unsigned long max_mapnr;

https://elixir.bootlin.com/linux/latest/source/mm/memory.c
https://elixir.bootlin.com/linux/latest/source/mm/nommu.c

https://www.ilinuxkernel.com/files/Linux_Physical_Memory_Description.pdf

mem_map是一个struct page数组，管理着系统中所有的物理内存页面

=== pglist_data
https://elixir.bootlin.com/linux/latest/source/include/linux/mmzone.h

▪ NUMA系统上每个NUMA节点拥有一个pg_data_t结构来描述内存布局
▪ UMA系统用一个pglist_data结构来描述整个内存布局
▪ pglist_data划分为zone
▪ node_states: https://elixir.bootlin.com/linux/latest/source/include/linux/nodemask.h

=== zone
https://elixir.bootlin.com/linux/latest/source/include/linux/mmzone.h
▪ 由于硬件的限制，需要把页划分成区

    ▪ 某些硬件只能通过某些特定的内存地址来执行直接内存访问
    ▪ 一些体系结构的内存物理寻址范围比虚拟寻址范围大，于是某些内存就不能永久地映射到内核空间上

▪ 不是所有体系结构都定义了全部区, 如X86-64没有ZONE_HIGHMEM
▪ enum zone_type: https://elixir.bootlin.com/linux/latest/source/include/linux/mmzone.h
▪ zone_names: https://elixir.bootlin.com/linux/latest/source/mm/page_alloc.c

Q: 如何理解高端内存(high memory)?
A: https://www.zhihu.com/question/280526042

=== page
https://elixir.bootlin.com/linux/latest/source/include/linux/mm_types.h
https://elixir.bootlin.com/linux/latest/source/include/asm-generic/page.h
https://elixir.bootlin.com/linux/latest/source/include/linux/page-flags.h

=== vm_area_struct
https://elixir.bootlin.com/linux/latest/source/include/linux/mm_types.h

=== mm_struct
进程整个用户空间的抽象:  task_struct ◆――――――――> mm_struct ◆――――――――> vm_area_struct
https://elixir.bootlin.com/linux/latest/source/include/linux/mm_types.h
